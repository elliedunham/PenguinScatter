<html>
<head>
    <script src="https://d3js.org/d3.v5.min.js"></script>
   
   <link rel="stylesheet" type="text/css"
          href="Penguin.css">
    </head>
    
<body>
    <div>
    </div>
    <buttons>
    <table>
        <tr>
            <td id =FvHW>Final vs HW Mean </td>
            <td id = HWvQ>HW Mean vs Quiz Mean</td>
            <td id= TvF>Test Mean vs Final Mean</td>
            <td id = TvQ>Test Mean vs Quiz Mean</td>
        </tr>
        </table>
    </buttons>
 <svg>
   
    
   
    
    </svg>   
   
    
 <script>

var setTitle = function(msg)
{
    d3.select("div")
        .text(msg);
}
    var penguinPromise = d3.json("classData.json");

penguinPromise.then(function(penguins)
                   {
    console.log(penguins);
    setTitle("Average Homework Grade vs Grade on Final");
    displaySpread(penguins);
                    },
                   function(error)
                    {
                    console.log("error", error)
    
                 })
     
//HW vs Final
var displaySpread = function(penguin)
{
    //returns grade
var getGrade = function(penguin)
{
    return penguin.grade;
}
//calculates average homework
var avgHW = function(penguin)
{
  return d3.mean(penguin.homework.map(getGrade));
    
}
//returns final grade
var finalGrade = function(penguin)
{
    return penguin.final.map(getGrade);
}

    var height = 600
    var width = 600
var dot = d3.select("svg" )
            .attr("height", height )
            .attr("width",  width )
            .attr("id","graph" )
//an array of arrays of final grades
var finalG =  penguin.map(finalGrade);
//array of average hw grades
var HW = penguin.map(avgHW);
    var getFinalG = function(d)
    {
        return d[0];
    }
//array of final grades
var finalGArray = penguin.map(finalGrade).map(getFinalG);
    console.log(finalGArray);
    
//scaling 
var xScale = d3.scaleLinear()
                .domain([d3.min(finalG, function(d){return d[0];}), d3.max(finalG, function(d){return d[0];})])
                .range([0,width])
                  
var yScale = d3.scaleLinear()
                .domain([d3.min(HW), d3.max(HW)])
                .range([0,height])



    //an array consisting of just the final grade and average homework grade
    var things = [finalGArray, HW];
    console.log(things);
    console.log(HW);
    console.log(finalG);
    
    
 //creating dots   
dot.selectAll("circle")
    .data(penguin)
    .enter()
    .append("circle")
    .attr("cx",  function(penguin, index)
         {
    return xScale(things[0][index]);
})
    .attr("cy", function(penguin, index)
         {
    return yScale(things[1][index]);
        })
    .attr("r", 3)
    .attr("fill", "red")
}

    </script>
    
    </body>

    

</html>